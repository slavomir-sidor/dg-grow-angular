"use strict";(self.webpackChunkdg_grow_angular=self.webpackChunkdg_grow_angular||[]).push([[874],{9874:(H,_,s)=>{s.r(_),s.d(_,{ProductsModule:()=>$});var d=s(8583),v=s(609),m=s(3590);class w{}var e=s(639),g=s(3013),S=s(1841);let f=(()=>{class n{constructor(t){this.http=t,console.log("ProductService constructor")}putProduct(t){return new Promise((l,r)=>{try{this.getSales().then(i=>{i.data.push(t),l(t)}).catch(i=>r(i))}catch(o){r(o)}})}getSales(){return new Promise((t,l)=>{void 0!==this.sales?t(this.sales):this.http.get("./assets/products/potato_sales.json").toPromise().then(r=>{this.setSales(r),t(r)}).catch(r=>{l(r)})})}calculateSalesTotals(t){let r,l=[];for(let o=0;o<t.column.length;o++){if("Sales"===t.column[o].header)for(let i=0;i<t.column[o].subHeaders.length;i++)l.push(t.column[o].subHeaders[i].field);"Total sales"===t.column[o].header&&(t.column[o].field="totalSales")}for(let o=0;o<t.data.length;o++)r=0,Object.keys(t.data[o]).filter(i=>l.includes(i)).reduce((i,c)=>(i[c]=t.data[o][c],r+=t.data[o][c],i),{}),t.data[o].totalSales=r;return t}setSales(t){this.sales=this.calculateSalesTotals(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(S.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=s(665),h=s(7745),T=s(3928),P=s(8598),C=s(4207);function M(n,a){1&n&&(e.TgZ(0,"small",19),e._uU(1,"Product ID is required."),e.qZA())}function N(n,a){if(1&n&&(e.ynx(0),e.YNc(1,M,2,0,"ng-template",18),e.BQk()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}function A(n,a){1&n&&(e.TgZ(0,"small",20),e._uU(1,"Product name is required."),e.qZA())}function y(n,a){if(1&n&&(e.ynx(0),e.YNc(1,A,2,0,"ng-template",18),e.BQk()),2&n){e.oxw();const t=e.MAs(15);e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}function J(n,a){1&n&&(e.TgZ(0,"small",20),e._uU(1,"Sales start date is required."),e.qZA())}function q(n,a){if(1&n&&(e.ynx(0),e.YNc(1,J,2,0,"ng-template",18),e.BQk()),2&n){e.oxw();const t=e.MAs(26);e.xp6(1),e.Q6J("ngIf",t.hasError("required"))}}let Z=(()=>{class n{constructor(t,l,r){this.messageService=t,this.productService=l,this.router=r,this.item=new w}ngOnInit(){}submit(){this.productService.putProduct(this.item).then(t=>{this.messageService.add({severity:"success",summary:"Authentication",detail:"Your were successfully logged in."}),this.router.navigate(["","products","sales"])}).catch(t=>{this.messageService.add({severity:"error",summary:"Authentication",detail:"Wrong user name or password."})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.ez),e.Y36(f),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-product"]],decls:31,vars:10,consts:[["autocomplete","off",3,"ngSubmit"],["newForm","ngForm"],["header","New Product"],[1,"p-fluid"],[1,"p-field"],["for","name"],["id","productID","name","productID","type","text","pInputText","","required","","maxlength","13","size","13",3,"ngModel","ngModelChange"],["productID","ngModel"],[4,"ngIf"],["id","productName","name","productName","type","text","pInputText","","required","","maxlength","50","size","50",3,"ngModel","ngModelChange"],["productName","ngModel"],["id","manager","name","manager","type","text","pInputText","","maxlength","30","size","30",3,"ngModel","ngModelChange"],["manager","ngModel"],["id","salesStartDate","name","salesStartDate","maxlength","10","size","10",3,"ngModel","required","ngModelChange"],["salesStartDate","ngModel"],[1,"demo-container","p-p-0","p-p-sm-1","p-p-md-2","p-p-lg-3"],["pButton","","pRipple","","type","submit","label","Save",1,"p-button-raised","p-button-text",3,"disabled"],["pButton","","pRipple","","type","reset","label","Clear",1,"p-button-raised","p-button-text","p-button-plain"],[3,"ngIf"],["id","username2-help",1,"p-error"],[1,"p-error"]],template:function(t,l){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return l.submit()}),e.TgZ(2,"p-card",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"label",5),e._uU(6,"Product ID"),e.qZA(),e.TgZ(7,"input",6,7),e.NdJ("ngModelChange",function(o){return l.item.productID=o}),e.qZA(),e._uU(9),e.YNc(10,N,2,1,"ng-container",8),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"label",5),e._uU(13,"Product Name"),e.qZA(),e.TgZ(14,"input",9,10),e.NdJ("ngModelChange",function(o){return l.item.productName=o}),e.qZA(),e.YNc(16,y,2,1,"ng-container",8),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",5),e._uU(19,"Manager Name"),e.qZA(),e.TgZ(20,"input",11,12),e.NdJ("ngModelChange",function(o){return l.item.manager=o}),e.qZA(),e.qZA(),e.TgZ(22,"div",4),e.TgZ(23,"label",5),e._uU(24,"Sales start date"),e.qZA(),e.TgZ(25,"p-calendar",13,14),e.NdJ("ngModelChange",function(o){return l.item.salesStartDate=o}),e.qZA(),e.YNc(27,q,2,1,"ng-container",8),e.qZA(),e.qZA(),e.TgZ(28,"div",15),e._UZ(29,"button",16),e._UZ(30,"button",17),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(1),o=e.MAs(8),i=e.MAs(15),c=e.MAs(26);e.xp6(7),e.Q6J("ngModel",l.item.productID),e.xp6(2),e.hij(" ",o.errors," "),e.xp6(1),e.Q6J("ngIf",!((o.valid||o.pristine)&&!o.touched)),e.xp6(4),e.Q6J("ngModel",l.item.productName),e.xp6(2),e.Q6J("ngIf",!((i.valid||i.pristine)&&!i.touched)),e.xp6(4),e.Q6J("ngModel",l.item.manager),e.xp6(5),e.Q6J("ngModel",l.item.salesStartDate)("required",!0),e.xp6(2),e.Q6J("ngIf",!((c.valid||c.pristine)&&!c.touched)),e.xp6(2),e.Q6J("disabled",!r.valid)}},directives:[p._Y,p.JL,p.F,h.Z,p.Fj,T.o,p.Q7,p.nD,p.JJ,p.On,d.O5,P.f,C.Hq],styles:[".dg-label[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:5ex}"]}),n})();var b=s(9451),u=s(8323);function F(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).newClick()}),e.qZA(),e._UZ(2,"button",9),e.TgZ(3,"span",10),e._UZ(4,"i",11),e._UZ(5,"input",12),e.qZA(),e.qZA()}}function I(n,a){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e._UZ(2,"p-sortIcon",15),e.qZA()),2&n){const t=a.$implicit;e.s9C("pSortableColumn",t.field),e.xp6(1),e.hij(" ",t.header," "),e.xp6(1),e.s9C("field",t.field)}}function Y(n,a){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,I,3,3,"th",13),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"input",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().$implicit[o.field]=r}),e.qZA()}if(2&n){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.Q6J("ngModel",l[t.field])}}function D(n,a){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit,l=e.oxw().$implicit;e.hij(" ",l[t.field]," ")}}function O(n,a){1&n&&(e.TgZ(0,"td",17),e.TgZ(1,"p-cellEditor"),e.YNc(2,Q,1,1,"ng-template",18),e.YNc(3,D,1,1,"ng-template",19),e.qZA(),e.qZA())}function U(n,a){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,O,4,0,"td",16),e.qZA()),2&n){const t=a.columns;e.xp6(1),e.Q6J("ngForOf",t)}}const R=function(){return[10,25,50]},j=function(){return["id","name","totalSales"]};function B(n,a){if(1&n&&(e.TgZ(0,"p-table",2,3),e.YNc(2,F,6,0,"ng-template",4),e.YNc(3,Y,2,1,"ng-template",5),e.YNc(4,U,2,1,"ng-template",6),e.qZA()),2&n){const t=e.oxw();e.Q6J("columns",t.items.column)("value",t.items.data)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(7,R))("paginator",!0)("globalFilterFields",e.DdM(8,j))}}let x=(()=>{class n{constructor(){}ngOnInit(){}newClick(){console.log("eopn nes")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-table"]],inputs:{items:"items",name:"name",title:"title"},decls:2,vars:2,consts:[[3,"header"],["dataKey","id","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"columns","value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields",4,"ngIf"],["dataKey","id","styleClass","p-datatable-gridlines","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"columns","value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","globalFilterFields"],["table",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex","p-ai-center","p-jc-between"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-mr-2",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pEditableColumn","",4,"ngFor","ngForOf"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","text",3,"ngModel","ngModelChange"]],template:function(t,l){1&t&&(e.TgZ(0,"p-card",0),e.YNc(1,B,5,9,"p-table",1),e.qZA()),2&t&&(e.s9C("header",l.title),e.xp6(1),e.Q6J("ngIf",l.items))},directives:[h.Z,d.O5,u.iA,g.jx,C.Hq,T.o,d.sg,u.lQ,u.fz,u.Wq,u.YL,p.Fj,p.JJ,p.On],styles:[""]}),n})();const z=[{path:"new",component:Z},{path:"sales",component:(()=>{class n extends x{constructor(t,l,r,o){super(),this.dialogService=t,this.messageService=l,this.productService=r,this.router=o}ngOnInit(){this.productService.getSales().then(t=>{this.onProductSalesLoaded(t)})}onProductSalesLoaded(t){this.items=t}openNew(){this.dialogService.open(Z,{data:{id:"51gF3"},header:"Choose a Car",width:"70%"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.xA),e.Y36(g.ez),e.Y36(f),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sales"]],features:[e._Bn([b.xA]),e.qOj],decls:1,vars:1,consts:[["title","Sales","name","sales",3,"items"]],template:function(t,l){1&t&&e._UZ(0,"app-table",0),2&t&&e.Q6J("items",l.items)},directives:[x],styles:[""]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(z)]]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,E,v.m]]}),n})()}}]);